# ⭐⑴✅ Adding New Ansible App Roles

When asked to add a new ansible app role for `<something>`, follow these guidelines:

1. Check if there is an existing opensource git repo for `<something>`.
2. If there is, then weigh out the docker compose file there to see if that would be suitable or would be better to create our own.
3. Use the Role Structure from ansible/role/apps/netdata as an example and create the role in similar structure in ansible/roles/apps
4. Ensure the Docker Compose File DOES NOT have a version number at the top as its deprecated.
5. Ensure the docker compose file has the right traefik labels.
6. Ensure rule 05.variable_naming_convention.md is applied.
7. Ensure rule 03.traefik_configuration.yml is applied.
8. Add the respective tags in ansible/playbooks/deploy.yml and block in ansible/playbooks/includes/apps.yml
9. The Variables for the role goes into the default environment variable as yaml files in ansible/vars/dev2/<something>.yml
10. Any secrets for the role goes into the ansible/vars/dev2/secrets.yml file.
11. If the role warrants more secrets and deserves its own secrets file, then create a new file in ansible/vars/dev2/secrets/secret_ <something>.yml
12. Ensure rule 04.adding_database.yml is applied if <something> requires a database.
13. Suggest the run command as ansible-playbook ansible/playbooks/deploy.yml --tags <something>
14. Create a relevant commit message along with the git command using the commit guidelines outlined in rules/02.committing_changes.md
16. Inform the user that rule ⭐⑴✅ has been applied.

